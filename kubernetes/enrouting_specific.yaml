################################################################################
#  ENROUTING - V1 (100%)                                                       #
################################################################################
---

### Drinks
apiVersion: networking.istio.io/v1alpha3
kind: VirtualService
metadata:
  name: drinks-enrouting-specific
spec:
  hosts:
    - drinks
  http:
    - route:
      - destination:
          host: drinks
          subset: v1
        weight: 0
      - destination:
          host: drinks
          subset: v2
        weight: 100

---

### Cracks
apiVersion: networking.istio.io/v1alpha3
kind: VirtualService
metadata:
  name: cracks-enrouting-specific
spec:
  hosts:
    - cracks
  http:
    - route:
      - destination:
          host: cracks
          subset: v1
        weight: 100
      - destination:
          host: cracks
          subset: v2
        weight: 0

---

### Router
apiVersion: networking.istio.io/v1alpha3
kind: VirtualService
metadata:
  name: router-enrouting-specific
spec:
  hosts:
    - router
  http:
    - route:
      - destination:
          host: router
          subset: v1
        weight: 0
      - destination:
          host: router
          subset: v2
        weight: 100

---

### Frontend
apiVersion: networking.istio.io/v1alpha3
kind: VirtualService
metadata:
  name: frontend-enrouting-specific
spec:
  hosts:
    - frontend
  http:
    - route:
      - destination:
          host: frontend
          subset: v1
        weight: 100
      - destination:
          host: frontend
          subset: v2
        weight: 0
